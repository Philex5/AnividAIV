# FEAT-USER-PROFILE 用户详情页测试用例

关联需求：FEAT-USER-PROFILE（PRD 段落链接待补充：`docs/1-specs/PRD.md`）

## 主路径

1. **入口跳转**
   - 前置：存在公开 artwork、评论用户、Header 登录用户
   - 步骤：点击 artwork 作者头像/评论头像/Header Profile
   - 预期：进入 `/user/[uuid]` 用户详情页并展示基础信息

2. **公开内容展示**
   - 前置：用户有公开角色/世界/artworks
   - 步骤：进入用户详情页
   - 预期：三类内容列表正常展示，分页/加载正常

3. **本人更新 Profile**
   - 前置：用户登录并访问自己的详情页
   - 步骤：点击 Update Profile，修改用户名/头像/性别/简介并保存
   - 预期：保存成功并刷新显示最新信息

4. **本人设置背景**
   - 前置：用户登录并访问自己的详情页
   - 步骤：点击 Set Background，上传背景图并保存
   - 预期：背景图更新，页面即时生效

## 错误/边界

1. **非本人更新被拒绝**
   - 步骤：非本人调用更新接口，或使用他人 `id` 但携带本人会话
   - 预期：返回 401 或 403，错误信息英文 `Unauthorized` 或 `Forbidden`

2. **用户不存在**
   - 步骤：访问不存在的用户 uuid
   - 预期：返回 404，错误信息英文 `Profile not found`

3. **字段校验失败**
   - 步骤：提交超长用户名或非法 gender
   - 预期：返回 400，错误信息英文 `Invalid payload`

4. **背景上传失败**
   - 步骤：上传失败/超限
   - 预期：前端提示英文 `Failed to upload background`

5. **私有内容不泄露**
   - 步骤：访问用户详情页与公开列表接口
   - 预期：仅返回可见性为 public 的角色/世界/artworks，私有字段不出现在响应中

## 回归

1. **社区列表头像渲染**
   - 预期：头像展示不受影响，点击仍可跳转用户详情页

2. **Header 用户下拉菜单**
   - 预期：Profile 入口新增不影响其他菜单项

3. **公开角色/世界/作品列表**
   - 预期：原有列表接口与分页行为不受影响
